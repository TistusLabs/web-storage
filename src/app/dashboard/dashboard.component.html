<div>
  <div class="ws-preloader-line" *ngIf="itemsLoading">
    <div class="ws-preloader-load-bar">
      <div class="ws-preloader-bar"></div>
      <div class="ws-preloader-bar"></div>
      <div class="ws-preloader-bar"></div>
    </div>
  </div>
  <div class="ws-content-item clickable" *ngFor="let item of allFilesFolders" (click)="openContentItem(item, $event)">
    <div class="ws-preloader-line" *ngIf="itemLoading == item.id">
      <div class="ws-preloader-load-bar">
        <div class="ws-preloader-bar"></div>
        <div class="ws-preloader-bar"></div>
        <div class="ws-preloader-bar"></div>
      </div>
    </div>
    <button class="ws-overhead-btn ws-content-more-ops ws-button-flat iconed ws-abs-button" id="moreOptions-{{item.id}}" role="button" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false">
      <i class="ws-overhead-btn ws-content-more-ops material-icons">more_vert</i>
    </button>
    <div class="ws-shadow-full dropdown-menu dropdown-menu-right" attr.aria-labelledby="moreOptions-{{item.id}}">
      <ul class="ws-list ws-iconed-list">
        <li class="ws-overhead-btn ws-list-item clickable ws-hover-flat-primary">
          <i class="ws-overhead-btn material-icons ws-list-item-icon">link</i>
          <span class="ws-overhead-btn ws-list-item-text">Get a link</span>
        </li>
        <li class="ws-overhead-btn ws-content-share-btn ws-list-item clickable ws-hover-flat-primary" (click)="setcurrentItem(item)" data-toggle="modal" data-target="#initShareFile">
          <i class="ws-overhead-btn material-icons ws-list-item-icon">share</i>
          <span class="ws-overhead-btn ws-list-item-text">Share</span>
        </li>
        <li class="ws-overhead-btn ws-list-item clickable ws-hover-flat-primary">
          <i class="ws-overhead-btn material-icons ws-list-item-icon">delete</i>
          <span class="ws-overhead-btn ws-list-item-text">Delete</span>
        </li>
      </ul>
    </div>
    <div class="ws-content-item-preview">
      <i class="material-icons">{{ item.icon }}</i>
    </div>
    <div class="ws-content-item-info {{content.layout}}">
      <h3 class="ws-info-text-title">{{ item.name | slice:0:18 }}{{item.name.length >= 18 ? '...' : null}}</h3>
      <div class="ws-info-text-sub">
        Size : {{ item.size }}</div>
      <i class="ws-info-text-sub">{{ item.added_date }}</i>
    </div>
  </div>

  <!--Share file initialization-->
  <div class="modal fade" id="initShareFile" tabindex="-1" role="dialog" aria-labelledby="initNewFileCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content ws-card">
        <div class="modal-header ws-card-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Share File</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form [formGroup]="form">
          <div class="modal-body">
            <p>Select the users below to set permission for this file:</p>
            <label formArrayName="allusers" *ngFor="let user of form.controls.allusers.controls; let i = index">
              <input type="checkbox" [formControlName]="i"> {{allusers[i].username}}
              <br>
            </label>
            <div *ngIf="!form.valid">At least one user must be selected.</div>
          </div>
          <div class="modal-footer">
            <button [disabled]="!form.valid" type="submit" class="ws-button-flat" (click)="sharefile()" data-dismiss="modal">Share</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!--Share file initialization - ENDS -->

  <!--Full view-->
  <div class="ws-content-item-full" *ngIf="isContentItemFull" [ngStyle]="isContentItemFull ? {'width':'100%' , 'height':'100%'} : {'width':'0' , 'height':'0'}">
    <div class="ws-content-item-full-header clearfix row">
      <div class="col-md-4 col-sm-6 col-6">
        <h5>{{ selectedContentItem.folderName }}</h5>
      </div>
      <div class="col-md-4 col-sm-6 col-6"></div>
      <div class="col-md-4 col-sm-6 col-6">
        <ul class="nav ws-list-horizontal justify-content-end">
          <li class="nav-item" data-toggle="modal" data-target="#initShareFile">
            <button class="ws-button-flat iconed">
              <i class="material-icons ws-color-white">share</i>
            </button>
          </li>
          <li class="nav-item">
            <button class="ws-button-flat iconed">
              <i class="material-icons ws-color-white">delete</i>
            </button>
          </li>
          <li class="nav-item">
            <button class="ws-button-flat iconed" (click)="closeContentFull()">
              <i class="material-icons">close</i>
            </button>
          </li>
        </ul>
      </div>
    </div>
    <div class="ws-content-item-full-body-wrap">
      <div class="ws-content-item-full-body">
        <div class="ws-content-item-preview">
          <!-- <i class="material-icons">{{selectedContentItem.icon}}</i> -->
          <img [src]="imageToShow" alt="">
        </div>
        <div class="row ws-content-item-details">
          <div class="col-md-4 col-sm-4 col-4">
            <div>Added date :
              <b>{{selectedContentItem.fileInfo.addedDate}}</b>
            </div>
          </div>
          <div class="col-md-4 col-sm-4 col-4">
            <div>Last modified date :
              <b>{{selectedContentItem.fileInfo.lastModifiedDate}}</b>
            </div>
          </div>
          <div class="col-md-4 col-sm-4 col-4">
            <div>Size :
              <b>{{selectedContentItem.fileInfo.size}}</b>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>